!function(){function e(e,n){function t(){var e=l+", "+u+"%, "+c+"%",n="hsl("+e+")",t="hsla("+e+", 0)",a="url(images/color-background.svg)",i="rgba(0, 0, 0, 0.1), rgba(255, 255, 255, 0.1)";o.style.backgroundImage="linear-gradient("+i+"), linear-gradient(90deg, "+t+", "+n+"), "+a,r.style.backgroundImage="linear-gradient(90deg, "+i+"), linear-gradient("+n+", "+t+"), "+a}var a="AlphaSlider",o=i(a+"-portraitBar"),r=i(a+"-landscapeBar"),l=0,u=0,c=0,d=E(function(n){e(n),t()},n);return d.setRatio(1),d.addClass(a),d.barElement.appendChild(o),d.barElement.appendChild(r),t(),{abortTouch:d.abortTouch,element:d.element,setAlpha:d.setRatio,setHue:function(e){l=e,t()},setLuminance:function(e){c=e,t()},setSaturation:function(e){u=e,t()}}}function n(e,n){function t(){n(),c.add("active"),clearTimeout(l),l=setTimeout(function(){c.remove("active")},100)}var a=!1,o=i("Button-content");o.style.backgroundImage="url(images/"+e+".svg)";var r=i("Button");r.appendChild(o),r.addEventListener("mousedown",function(e){0===e.button&&(e.preventDefault(),a?a=!1:t())}),r.addEventListener("touchstart",function(e){a=!0,e.preventDefault(),t()});var l,u=!1,c=r.classList;return{contentElement:o,element:r,addClass:function(e){c.add(e)},check:function(){c.add("checked"),u=!0},isChecked:function(){return u},uncheck:function(){c.remove("checked"),u=!1}}}function t(){var e="Canvas",n=Math.max(screen.width,screen.height),t=document.createElement("canvas");t.className=e+"-canvas",t.width=t.height=n,t.style.left=t.style.top=-n/2+"px";var a=t.getContext("2d");a.lineCap="round",a.fillStyle="#fff",a.fillRect(0,0,n,n);var o=i(e+"-center");o.appendChild(t);var r=i(e);r.appendChild(o);var l,u,c=[],d=128,s=[];return{canvas:t,element:r,onUndoAvailable:function(e){l=e},onUndoUnavailable:function(e){u=e},operate:function(e){c.push(e),1==c.length&&l(),e(a);var t=c.length-d;if(!(0>t)){var o=Math.floor(t/d);if(!s[o]){var i=document.createElement("canvas");i.width=i.height=n;var r=i.getContext("2d");r.lineCap="round",o?r.drawImage(s[o-1],0,0):(r.fillStyle="#fff",r.fillRect(0,0,n,n)),s.push(i);for(var u=t;t+d>u;u++)c[u](r)}}},undo:function(){if(a.globalAlpha=1,s.length?a.drawImage(s[s.length-1],0,0):(a.fillStyle="#fff",a.fillRect(0,0,n,n)),c.length){c.pop();for(var e=s.length*d,t=e;t<c.length;t++)c[t](a);s.length*d>c.length&&s.pop(),c.length||u()}}}}function a(e){function n(){e(),s.add("active"),clearTimeout(c),c=setTimeout(function(){s.remove("active")},100)}var t=!1,a="ColorButton",o=i(a+"-opaque"),r=i(a+"-color");r.appendChild(o);var l=i(a+"-transparency Button-content");l.appendChild(r),l.style.backgroundImage="url(images/color-background.svg)";var u=i("Button");u.appendChild(l),u.addEventListener("mousedown",function(e){0===e.button&&(e.preventDefault(),t?t=!1:n())}),u.addEventListener("touchstart",function(e){t=!0,e.preventDefault(),n()});var c,d=!1,s=u.classList,h={};return{color:h,element:u,addClass:function(e){s.add(e)},check:function(){s.add("checked"),d=!0},isChecked:function(){return d},mark:function(){s.add("marked")},setColor:function(e,n,t,a){h.hue=e,h.saturation=n,h.luminance=t,h.alpha=a;var i=e+", "+n+"%, "+t+"%",l="hsla("+i+", "+a+")";r.style.backgroundColor=l;var u="hsl("+i+")";o.style.backgroundColor=u},uncheck:function(){s.remove("checked"),d=!1},unmark:function(){s.remove("marked")}}}function o(e){function n(n,i,l,u){var c=a(function(){t(c),e(c)});return c.setColor(n,i,l,1),c.addClass(r+"-colorButton"),c.addClass(r+"-"+u+"Button"),o.push(c),c}function t(e){E.uncheck(),e.check(),E=e,y.setColor=e.setColor}var o=[],r="ColorButtonsPanel",l=n(0,0,0,"black");l.check(),l.mark();var u=n(0,0,40,"darkGrey"),c=n(0,0,70,"lightGrey"),d=n(0,0,100,"white");d.mark();var s=n(232,100,50,"blue"),h=n(210,100,80,"skyBlue"),f=n(114,100,33,"darkGreen"),v=n(115,87,50,"green"),p=n(4,100,47,"red"),m=n(60,100,50,"yellow"),g=n(30,100,33,"brown"),C=n(32,100,50,"orange"),b=n(306,100,33,"violet"),k=n(312,100,83,"pink"),L=n(30,55,65,"darkSkin"),B=n(31,55,75,"lightSkin"),E=l,w=i(r);w.appendChild(l.element),w.appendChild(u.element),w.appendChild(c.element),w.appendChild(d.element),w.appendChild(s.element),w.appendChild(h.element),w.appendChild(f.element),w.appendChild(v.element),w.appendChild(p.element),w.appendChild(m.element),w.appendChild(g.element),w.appendChild(C.element),w.appendChild(b.element),w.appendChild(k.element),w.appendChild(L.element),w.appendChild(B.element);var y={blackButton:l,element:w,select:t,whiteButton:d,setColor:E.setColor};return y}function i(e){var n=document.createElement("div");return n.className=e,n}function r(n){function t(){h.abortTouch(),f.abortTouch(),v.abortTouch()}function a(){n(o,r,l,u)}var o=0,r=0,l=0,u=1,s="EditColorPanel",h=c(function(e){o=e,a(),f.setHue(o),v.setHue(o),p.setHue(o)},a),f=B(function(e){r=e,a(),v.setSaturation(r),p.setSaturation(r)},a),v=d(function(e){l=e,a(),f.setLuminance(l),p.setLuminance(l)},a),p=e(function(e){u=e,a()},a),m=i(s);return m.appendChild(h.element),m.appendChild(f.element),m.appendChild(v.element),m.appendChild(p.element),{element:m,hide:function(){t(),p.abortTouch(),m.classList.remove("visible")},setColor:function(e,n,a,i){t(),o=e,r=n,l=a,u=i,h.setHue(o),f.setHue(o),f.setSaturation(r),f.setLuminance(l),v.setHue(o),v.setSaturation(r),v.setLuminance(l),p.setHue(o),p.setSaturation(r),p.setLuminance(l),p.setAlpha(u)},show:function(){m.classList.add("visible")}}}function l(e,n){function t(){var e=document.createElement("input");e.type="file",e.accept="image/*",e.className="FileButton-input",e.addEventListener("change",function(){var a=new FileReader;a.readAsDataURL(e.files[0]),a.onload=function(){var e=new Image;e.src=a.result,e.onload=function(){n(e)},e.onabort=function(){},e.onerror=function(){}},a.onabort=function(){},a.onerror=function(){},o.removeChild(e),t()}),o.appendChild(e)}var a=i("Button-content");a.style.backgroundImage="url(images/"+e+".svg)";var o=i("Button");return o.appendChild(a),t(),{element:o,addClass:function(e){o.classList.add(e)}}}function u(e,t,a){var o="FilePanel",r=n("file",e);r.addClass(o+"-newButton");var u=l("open",t);u.addClass(o+"-openButton");var c=n("save",a);c.addClass(o+"-saveButton");var d=i(o+"-content");d.appendChild(r.element),d.appendChild(u.element),d.appendChild(c.element);var s=i(o);s.appendChild(d);var h=d.classList;return{element:s,hide:function(){h.remove("visible")},show:function(){h.add("visible")}}}function c(e,n){var t=E(function(n){e(360*n)},n);return t.addClass("HueSlider"),{abortTouch:t.abortTouch,element:t.element,setHue:function(e){t.setRatio(e/360)}}}function d(e,n){function t(){var e="hsl("+a+", "+o+"%, 0%)",n="hsl("+a+", "+o+"%, 50%)",t="hsl("+a+", "+o+"%, 100%)",i="rgba(0, 0, 0, 0.1), rgba(255, 255, 255, 0.1)";l.style.backgroundImage="linear-gradient("+i+"), linear-gradient(90deg, "+e+", "+n+", "+t+")",u.style.backgroundImage="linear-gradient(90deg, "+i+"), linear-gradient("+t+", "+n+", "+e+")"}var a=0,o=0,r="LuminanceSlider",l=i(r+"-portraitBar"),u=i(r+"-landscapeBar"),c=E(function(n){e(100*n)},n);return c.addClass(r),c.barElement.appendChild(l),c.barElement.appendChild(u),t(),{abortTouch:c.abortTouch,element:c.element,setHue:function(e){a=e,t()},setLuminance:function(e){c.setRatio(e/100)},setSaturation:function(e){o=e,t()}}}function s(e){var n="MainBar",t=i(n+"-alternativeBar");t.appendChild(e.element);var a=i(n+"-bar"),o=i(n+"-scroll");o.appendChild(a),o.appendChild(t);var r=i(n);r.appendChild(o);var l=o.classList;return{element:r,addButton:function(e){a.appendChild(e.element)},show:function(){r.classList.add("visible")},slide:function(){l.add("slide")},unslide:function(){l.remove("slide")}}}function h(){function e(){o(),r(),a(),K()}function a(){W.hide(),q.uncheck()}function o(){H.hide(),N.uncheck()}function r(){z.hide(),F.uncheck()}function l(){Y.uncheck(),A.disable()}function c(){X.uncheck(),x.disable()}function d(){Y.check(),A.enable()}function h(){X.check(),x.enable()}function g(){e(),c(),d(),z.setSize(I),Y.mark(),X.unmark(),S(A),P=g}function k(){e(),l(),h(),z.setSize(D),X.mark(),Y.unmark(),S(x),P=k}function B(e,n,t,a,o){o==x.colorButton&&T(e,n,t,a),o==A.colorButton&&E(e,n,t,a),z.setColor(e,n,t)}function E(e,n,t,a){A.setColor(e,n,t,a),Y.setColor(e,n,t,a)}function T(e,n,t,a){x.setColor(e,n,t,a),X.setColor(e,n,t,a)}function S(e){var n=e.colorButton;H.select(n);var t=n.color,a=t.hue,o=t.saturation,i=t.luminance;e.setColor(a,o,i,t.alpha),z.setColor(a,o,i)}var D=4,I=8,R="MainPanel",M=t(),P=k,H=v(B,function(){o(),a(),P()},function(e){if(P==k){var n=x.colorButton;n!=A.colorButton&&n.unmark(),x.colorButton=e,e.mark()}else{var n=A.colorButton;n!=x.colorButton&&n.unmark(),A.colorButton=e,e.mark()}},function(e){var n=e.color;j.setColor(n.hue,n.saturation,n.luminance,1),U.enable(),H.hide(),J.slide()}),x=m(D,M);x.colorButton=H.blackButton;var A=m(I,M);A.colorButton=H.whiteButton;var U=b(M,function(e,n,t){j.setColor(e,n,t,1)}),z=p(function(e){P==k?(D=e,x.setSize(e)):(I=e,A.setSize(e))},function(){P()});z.setSize(D);var W=u(function(){M.operate(function(e){var n=e.canvas.width;e.fillStyle="#fff",e.globalAlpha=1,e.fillRect(0,0,n,n)}),P()},function(e){M.operate(function(n){var t=M.element;f(n,e,t.offsetWidth,t.offsetHeight)}),P()},function(){var e=M.element,n=e.offsetWidth,t=e.offsetHeight;L(M.canvas,n,t),P()}),X=w("pencil",k);X.addClass(R+"-pencilButton");var Y=w("eraser",g);Y.addClass(R+"-eraserButton"),E(0,0,100,1),T(0,0,0,1);var N=n("palette",function(){N.isChecked()?P():(c(),l(),r(),a(),K(),H.show(),N.check())});N.addClass(R+"-paletteButton");var F=n("params",function(){F.isChecked()?P():(c(),l(),o(),a(),K(),z.show(),F.check())});F.addClass(R+"-paramsButton");var G=y(M.undo);M.onUndoAvailable(G.enable),M.onUndoUnavailable(G.disable);var q=n("burger",function(){q.isChecked()?P():(c(),l(),o(),r(),K(),W.show(),q.check())});q.addClass(R+"-fileButton");var V=i(R+"-content");V.appendChild(M.element),V.appendChild(H.element),V.appendChild(z.element),V.appendChild(W.element);var j=C(function(e,n,t){H.pickColor(e,n,t),B(e,n,t,1,H.getActiveButton())},function(){U.disable(),K(),H.isEditVisible()?H.show():P()}),J=s(j);J.addButton(X),J.addButton(Y),J.addButton(N),J.addButton(F),J.addButton(G),J.addButton(q);var K=J.unslide,O=i(R);return O.appendChild(V),O.appendChild(J.element),{element:O,show:function(){k(),J.show()}}}function f(e,n,t,a){var o,i,r=e.canvas,l=t/a,u=n.width/n.height;l>u?(o=t,i=o/u):(i=a,o=i*u);var c=(r.width-o)/2,d=(r.height-i)/2;e.globalAlpha=1,e.drawImage(n,c,d,o,i)}function v(e,n,t,l){function u(e){var n=e.hue,t=e.saturation,a=e.luminance,o=e.alpha;s.setColor(n,t,a,o),h.setColor(n,t,a,o)}var c="PalettePanel",d=o(function(a){k=a,t(a);var o=a.color;u(o),e(o.hue,o.saturation,o.luminance,o.alpha,a),s.isChecked()||n()}),s=a(function(){C&&(s.isChecked()?(h.hide(),s.uncheck(),b=!1):(h.show(),s.check(),b=!0))});s.setColor(0,0,0,1),s.addClass(c+"-previewButton");var h=r(function(n,t,a,o){s.setColor(n,t,a,o),d.setColor(n,t,a,o),e(n,t,a,o,k)}),f=g(function(){l(k)}),v=i(c+"-secondLayer");v.appendChild(d.element),v.appendChild(s.element),v.appendChild(f.element);var p=i(c+"-content");p.appendChild(h.element),p.appendChild(v);var m=i(c);m.appendChild(p);var C=!1,b=!1,k=d.blackButton;return{blackButton:d.blackButton,element:m,whiteButton:d.whiteButton,getActiveButton:function(){return k},hide:function(){C&&(h.hide(),p.classList.remove("visible"),C=!1)},isEditVisible:function(){return b},select:function(e){k=e,d.select(e),u(e.color)},pickColor:function(e,n,t){var a=s.color.alpha;h.setColor(e,n,t,a),s.setColor(e,n,t,a),d.setColor(e,n,t,a)},show:function(){C||(b&&h.show(),p.classList.add("visible"),C=!0)}}}function p(e,n){function t(){u.clearRect(0,0,l.width,l.height),u.beginPath(),u.arc(l.width/2,l.height/2,(f+1)/2,0,2*Math.PI),u.fill()}var a="ParamsPanel",o=1,r=48,l=document.createElement("canvas");l.width=l.height=r+4,l.className=a+"-previewCanvas";var u=l.getContext("2d"),c=E(function(n){f=o+n*r,e(f),t()},n);c.addClass(a+"-slider");var d=i(a+"-content");d.appendChild(c.element),d.appendChild(l);var s=i(a);s.appendChild(d);var h=!1,f=o;return{element:s,hide:function(){c.abortTouch(),d.classList.remove("visible")},setColor:function(e,n,t){u.fillStyle="hsl("+e+", "+n+"%, "+t+"%)",h=!0},setSize:function(e){f=e,h=!0},show:function(){h&&(t(),h=!1,c.setRatio((f-o)/(r-o))),d.classList.add("visible")}}}function m(e,n){function t(t,a){!function(e,o,i){n.operate(function(n){n.lineWidth=e,n.fillStyle=i,n.beginPath(),n.arc(t,a,o,0,2*Math.PI),n.fill()})}(e,d,g)}function a(e){function n(){u?u=!1:(removeEventListener("mousemove",a),removeEventListener("mouseup",n))}function a(e){if(u)u=!1;else{var n=h.getBoundingClientRect(),t=e.clientX-n.left,a=e.clientY-n.top;o(r,l,t,a),r=t,l=a}}if(0===e.button)if(e.preventDefault(),u)u=!1;else{var i=h.getBoundingClientRect(),r=e.clientX-i.left,l=e.clientY-i.top;t(r,l),addEventListener("mousemove",a),addEventListener("mouseup",n)}}function o(t,a,o,i){!function(e,r){n.operate(function(n){n.lineWidth=e,n.strokeStyle=r,n.beginPath(),n.moveTo(t,a),n.lineTo(o,i),n.stroke()})}(e,g)}function i(e){u=!0,e.preventDefault();for(var n=e.changedTouches,t=0;t<n.length;t++)delete c[n[t].identifier]}function r(e){u=!0,e.preventDefault();for(var n=h.getBoundingClientRect(),t=e.changedTouches,a=0;a<t.length;a++){var i=t[a],r=c[i.identifier];if(r){var l=i.clientX-n.left,d=i.clientY-n.top;o(r.x,r.y,l,d),r.x=l,r.y=d}}}function l(e){u=!0,e.preventDefault();for(var n=h.getBoundingClientRect(),a=e.changedTouches,o=0;o<a.length;o++){var i=a[o],r=i.clientX-n.left,l=i.clientY-n.top;t(r,l),c[i.identifier]={x:r,y:l}}}var u=!1,c={},d=e/2,s=!1,h=n.canvas,f=0,v=0,p=0,m=1,g="hsla(0, 0%, 0%, 1)";return{disable:function(){s&&(h.removeEventListener("mousedown",a),h.removeEventListener("touchstart",l),h.removeEventListener("touchmove",r),h.removeEventListener("touchend",i),s=!1)},enable:function(){s||(h.addEventListener("mousedown",a),h.addEventListener("touchstart",l),h.addEventListener("touchmove",r),h.addEventListener("touchend",i),s=!0)},setColor:function(e,n,t,a){f=e,v=n,p=t,m=a,g="hsla("+f+", "+v+"%, "+p+"%, "+m+")"},setSize:function(n){e=n,d=e/2}}}function g(e){var t=n("pick",e);return t.addClass("PickButton"),t}function C(e,t){var o="PickPanel",r=a(function(){var n=r.color;e(n.hue,n.saturation,n.luminance),t()});r.addClass(o+"-colorButton");var l=n("cancel",t);l.addClass(o+"-cancelButton");var u=i(o);return u.appendChild(r.element),u.appendChild(l.element),{element:u,setColor:r.setColor}}function b(e,n){function t(e){var n=a(e);r(n[0],n[1])}function a(e){var n=v.getBoundingClientRect(),t=Math.floor(e.clientX-n.left),a=Math.floor(e.clientY-n.top);return[t,a]}function o(e){function n(e){e.preventDefault(),s?s=!1:i(e)}function a(e){e.preventDefault(),removeEventListener("mousemove",n),removeEventListener("mouseup",a)}0===e.button&&(e.preventDefault(),s?s=!1:(t(e),addEventListener("mousemove",n),addEventListener("mouseup",a)))}function i(e){var n=a(e),t=n[0],o=n[1];t>=0&&p>t&&o>=0&&m>o&&r(t,o)}function r(e,t){var a=4*(e+t*p),o=k(d[a],d[a+1],d[a+2]);n(o.hue,o.saturation,o.luminance)}function l(e){e.preventDefault(),s=!0;for(var n=e.changedTouches,t=0;t<n.length;t++)if(n[t].identifier===h){h=null;break}}function u(e){e.preventDefault(),s=!0;for(var n=e.changedTouches,t=0;t<n.length;t++){var a=n[t];if(a.identifier===h){i(a);break}}}function c(e){if(e.preventDefault(),s=!0,null===h){var n=e.changedTouches[0];h=n.identifier,t(n)}}var d,s=!1,h=null,f=!1,v=e.canvas,p=v.width,m=v.height,g=v.getContext("2d");return{disable:function(){f&&(v.removeEventListener("mousedown",o),v.removeEventListener("touchstart",c),removeEventListener("touchmove",u),removeEventListener("touchend",l),f=!1)},enable:function(){f||(v.addEventListener("mousedown",o),v.addEventListener("touchstart",c),addEventListener("touchmove",u),addEventListener("touchend",l),f=!0,d=g.getImageData(0,0,p,m).data)}}}function k(e,n,t){var a,o,i,r,l,u;if(e/=255,n/=255,t/=255,a=Math.max(e,n,t),o=Math.min(e,n,t),l=(a+o)/2,a==o)i=r=0;else{switch(u=a-o,r=l>.5?u/(2-a-o):u/(a+o),a){case e:i=(n-t)/u+(t>n?6:0);break;case n:i=(t-e)/u+2;break;case t:i=(e-n)/u+4}i/=6}return i=Math.floor(360*i),r=Math.floor(100*r),l=Math.floor(100*l),{hue:i,saturation:r,luminance:l}}function L(e,n,t){var a=document.createElement("canvas");a.width=n,a.height=t;var o=(n-e.width)/2,i=(t-e.height)/2,r=a.getContext("2d");r.drawImage(e,o,i);var l=document.createElement("a");l.href=a.toDataURL("image/png"),l.download="picture.png",l.style.position="absolute",l.style.top=l.style.left=0,document.body.appendChild(l),l.click(),document.body.removeChild(l)}function B(e,n){function t(){var e="hsl("+a+", 100%, "+o+"%)",n="hsl("+a+", 0%, "+o+"%)",t="rgba(0, 0, 0, 0.1), rgba(255, 255, 255, 0.1)";l.style.backgroundImage="linear-gradient("+t+"), linear-gradient(90deg, "+n+", "+e+")",u.style.backgroundImage="linear-gradient(90deg, "+t+"), linear-gradient("+e+", "+n+")"}var a=0,o=0,r="SaturationSlider",l=i(r+"-portraitBar"),u=i(r+"-landscapeBar"),c=E(function(n){e(100*n)},n);return c.addClass(r),c.barElement.appendChild(l),c.barElement.appendChild(u),t(),{abortTouch:c.abortTouch,element:c.element,setHue:function(e){a=e,t()},setLuminance:function(e){o=e,t()},setSaturation:function(e){c.setRatio(e/100)}}}function E(e,n){function t(t){function i(n){var t=h.getBoundingClientRect(),o=d.offsetHeight;if(innerWidth>innerHeight){var i=h.offsetHeight;c=1-(n.clientY-t.top-o/2)/i}else{var r=h.offsetWidth;c=(n.clientX-t.left-o/2)/r}c=Math.max(0,Math.min(1,c)),a(),e(c)}function r(){endSlide(),n()}function f(e){l?l=!1:i(e)}function v(){l?l=!1:r()}function p(e){l=!0;for(var n=e.changedTouches,t=0;t<n.length;t++)if(n[t].identifier===u){e.preventDefault(),r();break}}function m(e){l=!0;for(var n=e.changedTouches,t=0;t<n.length;t++){var a=n[t];if(a.identifier===u){e.preventDefault(),i(a);break}}}endSlide=function(){o=!1,u=null,s.remove("active"),removeEventListener("mousemove",f),removeEventListener("mouseup",v),removeEventListener("touchmove",m),removeEventListener("touchend",p)},o=!0,i(t),s.add("active"),addEventListener("mousemove",f),addEventListener("mouseup",v),addEventListener("touchmove",m),addEventListener("touchend",p)}function a(){d.style.top=100*(1-c)+"%",d.style.left=100*c+"%"}var o=!1,r="Slider",l=!1,u=null,c=0,d=i(r+"-handle"),s=d.classList,h=i(r+"-handleWrapper");h.appendChild(d);var f=i(r+"-bar"),v=i(r);return v.appendChild(f),v.appendChild(h),v.addEventListener("mousedown",function(e){0===e.button&&(e.preventDefault(),l?l=!1:t(e))}),v.addEventListener("touchstart",function(e){if(l=!0,null===u){e.preventDefault();var n=e.changedTouches[0];u=n.identifier,t(n)}}),a(),{barElement:f,element:v,abortTouch:function(){o&&endSlide()},addClass:function(e){v.classList.add(e)},setRatio:function(e){c=e,a()}}}function w(e,t){var a=n(e,t),o="ToolButton",r=i(o+"-opaque"),l=i(o+"-color");l.appendChild(r);var u=i(o+"-transparency");u.style.backgroundImage="url(images/color-background.svg)",u.appendChild(l);var c=a.element,d=c.classList;return a.contentElement.appendChild(u),{addClass:a.addClass,check:a.check,element:c,isChecked:a.isChecked,uncheck:a.uncheck,mark:function(){d.add("marked")},setColor:function(e,n,t,a){var o=e+", "+n+"%, "+t+"%",i="hsla("+o+", "+a+")";l.style.background=i;var u="hsl("+o+")";r.style.background=u},unmark:function(){d.remove("marked")}}}function y(e){function n(){function n(){removeEventListener("mouseup",t),removeEventListener("touchend",a),u.remove("active"),clearInterval(o)}function t(){i?i=!1:n()}function a(e){i=!0;for(var t=e.changedTouches,a=0;a<t.length;a++)t[a].identifier===l&&(l=null,n())}var i=!1;addEventListener("touchend",a),addEventListener("mouseup",t),u.add("active"),o=setInterval(e,50),e()}var t=i("Button-content");t.style.backgroundImage="url(images/undo.svg)";var a=i("Button UndoButton disabled");a.appendChild(t),a.addEventListener("mousedown",function(e){0===e.button&&(e.preventDefault(),r?r=!1:n())}),a.addEventListener("touchstart",function(e){r=!0,null===l&&(e.preventDefault(),l=e.changedTouches[0].identifier,n())});var o,r=!1,l=null,u=a.classList;return{element:a,disable:function(){u.add("disabled")},enable:function(){u.remove("disabled")}}}!function(){var e=i("Main-horizontalProgress"),n=i("Main-verticalProgress"),t=i("Main-loadBar");t.appendChild(e),t.appendChild(n);var a=h(),o=document.body;o.appendChild(a.element),o.appendChild(t);var r=0,l=["pencil","eraser","palette","params","undo","burger"];l.forEach(function(i){var u=new Image;u.src="images/"+i+".svg",u.onload=u.onerror=u.onabort=function(){r++;var i=r/l.length*100+"%";e.style.width=i,n.style.height=i,r==l.length&&(a.show(),setTimeout(function(){t.classList.add("hidden"),setTimeout(function(){o.removeChild(t)},250)},250))}})}()}();